"use strict";(self["webpackChunkmemo_letter"]=self["webpackChunkmemo_letter"]||[]).push([[602],{602:function(e,t,n){n.r(t),n.d(t,{amplify_s3_image_picker:function(){return h}});n(1703);var r=n(4916),o=n(40),i=n(4001),u=n(9815),c=n(8035),a=(n(3003),n(3463)),l=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function u(e){try{a(r.next(e))}catch(t){i(t)}}function c(e){try{a(r["throw"](e))}catch(t){i(t)}}function a(e){e.done?n(e.value):o(e.value).then(u,c)}a((r=r.apply(e,t||[])).next())}))},s=function(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return a([e,t])}}function a(i){if(n)throw new TypeError("Generator is already executing.");while(u)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},f=new o.k("S3ImagePicker"),h=function(){function e(e){var t=this;(0,r.r)(this,e),this.contentType="binary/octet-stream",this.level=u.A.Public,this.headerTitle=c.T.IMAGE_PICKER_TITLE,this.headerHint=c.T.IMAGE_PICKER_HINT,this.placeholderHint=c.T.IMAGE_PICKER_PLACEHOLDER_HINT,this.buttonText=c.T.IMAGE_PICKER_BUTTON_TEXT,this.handlePick=function(e){return l(t,void 0,void 0,(function(){var t,n,r,o,i,u,c,l,h,p;return s(this,(function(s){switch(s.label){case 0:t=this,n=t.path,r=void 0===n?"":n,o=t.level,i=t.track,u=t.identityId,c=t.fileToKey,l=r+(0,a.c)(e,c),s.label=1;case 1:return s.trys.push([1,4,,5]),[4,(0,a.p)(l,e,o,i,e["type"],f)];case 2:return s.sent(),h=this,[4,(0,a.g)(l,o,i,u,f)];case 3:return h.src=s.sent(),[3,5];case 4:throw p=s.sent(),f.error(p),new Error(p);case 5:return[2]}}))}))}}return e.prototype.render=function(){return(0,r.h)(r.H,null,(0,r.h)("slot",{name:"photo-picker"},(0,r.h)("amplify-photo-picker",{previewSrc:this.src,handleClick:this.handlePick,headerTitle:i.o.get(this.headerTitle),headerHint:i.o.get(this.headerHint),placeholderHint:i.o.get(this.placeholderHint),buttonText:i.o.get(this.buttonText)})))},e}()},3463:function(e,t,n){n.d(t,{a:function(){return f},c:function(){return a},g:function(){return l},i:function(){return c},p:function(){return h}});n(1703);var r=n(4171),o=n(3003),i=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function u(e){try{a(r.next(e))}catch(t){i(t)}}function c(e){try{a(r["throw"](e))}catch(t){i(t)}}function a(e){e.done?n(e.value):o(e.value).then(u,c)}a((r=r.apply(e,t||[])).next())}))},u=function(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return a([e,t])}}function a(i){if(n)throw new TypeError("Generator is already executing.");while(u)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},c=new Set(["apng","bmp","gif","ico","cur","jpg","jpeg","jfif","pjpeg","pjp","png","svg","tif","tiff","webp"]),a=function(e,t){var n=e.name,r=e.size,o=e.type,i=encodeURI(n);return t&&(i="string"===typeof t?t:"function"===typeof t?t({name:n,size:r,type:o}):encodeURI(JSON.stringify(t)),i||(i="empty_key")),i.replace(/\s/g,"_")},l=function(e,t,n,c,a){return i(void 0,void 0,void 0,(function(){var i,l;return u(this,(function(u){switch(u.label){case 0:if(!o.Ke||"function"!==typeof o.Ke.get)throw new Error(r.d);u.label=1;case 1:return u.trys.push([1,3,,4]),[4,o.Ke.get(e,{level:t,track:n,identityId:c})];case 2:return i=u.sent(),a.debug("Storage image get",i),[2,i];case 3:throw l=u.sent(),new Error(l);case 4:return[2]}}))}))},s=function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=function(){n("Failed to read file!"),r.abort()},r.readAsText(e)}))},f=function(e,t,n,c,a){return i(void 0,void 0,void 0,(function(){var i,l,f;return u(this,(function(u){switch(u.label){case 0:if(!o.Ke||"function"!==typeof o.Ke.get)throw new Error(r.d);u.label=1;case 1:return u.trys.push([1,4,,5]),[4,o.Ke.get(e,{download:!0,level:t,track:n,identityId:c})];case 2:return i=u.sent(),a.debug(i),[4,s(i["Body"])];case 3:return l=u.sent(),[2,l];case 4:throw f=u.sent(),new Error(f);case 5:return[2]}}))}))},h=function(e,t,n,c,a,l){return i(void 0,void 0,void 0,(function(){var i,s;return u(this,(function(u){switch(u.label){case 0:if(!o.Ke||"function"!==typeof o.Ke.put)throw new Error(r.d);u.label=1;case 1:return u.trys.push([1,3,,4]),[4,o.Ke.put(e,t,{contentType:a,level:n,track:c})];case 2:return i=u.sent(),l.debug("Upload data",i),[3,4];case 3:throw s=u.sent(),new Error(s);case 4:return[2]}}))}))}}}]);
//# sourceMappingURL=602.2fe874d0.js.map